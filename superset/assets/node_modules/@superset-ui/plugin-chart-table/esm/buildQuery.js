function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}import{buildQueryContext,convertMetric}from"@superset-ui/query";export default function buildQuery(a){// Set the single QueryObject's groupby field with series in formData
return buildQueryContext(a,function(b){var c=a.include_time,d=[],e=b.groupby,f=[],g=a.timeseries_limit_metric;if(a.all_columns&&0<a.all_columns.length){d=[].concat(a.all_columns);var h=a.order_by_cols||[];h.forEach(function(a){var b=JSON.parse(a);f.push([convertMetric(b[0]),b[1]])}),e=[]}else g&&f.push([convertMetric(g),!a.order_desc]);return[_extends({},b,{columns:d,groupby:e,is_timeseries:c,orderby:f})]})}