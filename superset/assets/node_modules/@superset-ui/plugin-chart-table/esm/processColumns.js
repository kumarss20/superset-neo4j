function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}import{getNumberFormatter,NumberFormats}from"@superset-ui/number-format";import{getTimeFormatter}from"@superset-ui/time-format";import{createSelector}from"reselect";var DTTM_ALIAS="__timestamp";function processColumns(a,b,c,d,e){var f=e.columnFormats,g=e.verboseMap,h={};b.forEach(function(a){for(var b=[],d=0;d<c.length;d+=1)b.push(c[d][a]);h[a]=b});for(var j={},k={},l=0;l<b.length;l+=1)j[b[l]]=Math.max.apply(Math,h[b[l]]),k[b[l]]=Math.min.apply(Math,h[b[l]]);var m=getNumberFormatter(NumberFormats.PERCENT_3_POINT),n=getTimeFormatter(d),o=a.map(function(a){var c,d=g[a],e=f&&f[a],h="string";a===DTTM_ALIAS&&(c=n);var i={};// Handle verbose names for percents
if(0<=b.indexOf(a)&&(c=getNumberFormatter(e),h="metric",i.maxValue=j[a],i.minValue=k[a]),!d)if(0<a.length&&"%"===a[0]){var l=a.substring(1);d="% "+(g[l]||l),c=m}else d=a;return _extends({format:c,key:a,label:d,type:h},i)});return o}var getCreateSelectorFunction=function(){return createSelector(function(a){return a.columns},function(a){return a.metrics},function(a){return a.records},function(a){return a.tableTimestampFormat},function(a){return a.datasource},function(a,b,c,d,e){return processColumns(a,b,c,d,e)})};export default getCreateSelectorFunction;