"use strict";exports.__esModule=!0,exports.default=transformProps;var color=_interopRequireWildcard(require("d3-color")),_numberFormat=require("@superset-ui/number-format"),_BigNumber=require("./BigNumber");function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}return b.default=a,b}/**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */ /* eslint-disable complexity, sort-keys */var TIME_COLUMN="__timestamp";function transformProps(a){var c,d=a.width,e=a.height,f=a.formData,h=a.queryData,i=f.colorPicker,j=f.compareLag,k=f.compareSuffix,l=void 0===k?"":k,m=f.headerFontSize,n=f.subheaderFontSize,o=f.metric,p=f.showTrendLine,q=f.startYAxisAtZero,s=f.subheader,t=void 0===s?"":s,u=f.vizType,v=f.yAxisFormat,w=h.data;if(i){var x=i.r,r=i.g,g=i.b;c=color.rgb(x,r,g).hex()}var b,y,z=o&&o.label?o.label:o,A=+j||0,B="big_number"===u,C=B&&p,D=0,E=t;if(B){var H=[].concat(w).sort(function(c,a){return c[TIME_COLUMN]-a[TIME_COLUMN]});if(b=H[H.length-1][z],0<A){var I=H.length-(A+1);if(0<=I){var J=H[I][z];D=0===J?0:(b-J)/Math.abs(J);var K=(0,_numberFormat.getNumberFormatter)(_numberFormat.NumberFormats.PERCENT_SIGNED_1_POINT);E=K(D)+" "+l}}y=C?H.map(function(a){return{x:a[TIME_COLUMN],y:a[z]}}):null}else b=w[0][z],y=null;var F="";0<D?F="positive":0>D&&(F="negative");var G=(0,_numberFormat.getNumberFormatter)(v);return{width:d,height:e,bigNumber:b,className:F,formatBigNumber:G,headerFontSize:m,subheaderFontSize:n,mainColor:c,renderTooltip:(0,_BigNumber.renderTooltipFactory)(G),showTrendLine:C,startYAxisAtZero:q,subheader:E,trendLineData:y}}