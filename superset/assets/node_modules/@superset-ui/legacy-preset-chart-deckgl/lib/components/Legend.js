"use strict";exports.__esModule=!0,exports.default=void 0;var _react=_interopRequireDefault(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_numberFormat=require("@superset-ui/number-format");require("./Legend.css");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _inheritsLoose(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}var categoryDelimiter=" - ",propTypes={categories:_propTypes.default.object,toggleCategory:_propTypes.default.func,showSingleCategory:_propTypes.default.func,format:_propTypes.default.string,position:_propTypes.default.oneOf([null,"tl","tr","bl","br"])},defaultProps={categories:{},toggleCategory:function toggleCategory(){},showSingleCategory:function showSingleCategory(){},format:null,position:"tr"},Legend=/*#__PURE__*/function(a){function b(){return a.apply(this,arguments)||this}_inheritsLoose(b,a);var c=b.prototype;return c.format=function format(a){if(!this.props.format)return a;var b=parseFloat(a);return(0,_numberFormat.formatNumber)(this.props.format,b)},c.formatCategoryLabel=function formatCategoryLabel(a){if(!this.props.format)return a;if(a.includes(categoryDelimiter)){var b=a.split(categoryDelimiter);return this.format(b[0])+categoryDelimiter+this.format(b[1])}return this.format(a)},c.render=function render(){var a,b=this;if(0===Object.keys(this.props.categories).length||null===this.props.position)return null;var c=Object.entries(this.props.categories).map(function(a){var c=a[0],d=a[1],e={color:"rgba("+d.color.join(", ")+")"},f=d.enabled?"\u25FC":"\u25FB";return _react.default.createElement("li",{key:c},_react.default.createElement("a",{href:"#",onClick:function onClick(){return b.props.toggleCategory(c)},onDoubleClick:function onDoubleClick(){return b.props.showSingleCategory(c)}},_react.default.createElement("span",{style:e},f)," ",b.formatCategoryLabel(c)))}),d="t"===this.props.position.charAt(0)?"top":"bottom",e="r"===this.props.position.charAt(1)?"right":"left",f=(a={position:"absolute"},a[d]="0px",a[e]="10px",a);return _react.default.createElement("div",{className:"legend",style:f},_react.default.createElement("ul",{className:"categories"},c))},b}(_react.default.PureComponent);exports.default=Legend,Legend.propTypes=propTypes,Legend.defaultProps=defaultProps;