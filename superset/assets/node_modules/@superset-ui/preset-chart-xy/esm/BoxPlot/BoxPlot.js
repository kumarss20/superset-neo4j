import _pt from"prop-types";function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inheritsLoose(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}/* eslint-disable sort-keys, no-magic-numbers, complexity */import React from"react";import{BoxPlotSeries,XYChart}from"@data-ui/xy-chart";import{chartTheme}from"@data-ui/theme";import{WithLegend}from"@superset-ui/chart-composition";import DefaultTooltipRenderer from"./DefaultTooltipRenderer";import Encoder from"./Encoder";import createMarginSelector,{DEFAULT_MARGIN}from"../utils/selectors/createMarginSelector";import convertScaleToDataUIScale from"../utils/convertScaleToDataUIScaleShape";import createXYChartLayoutWithTheme from"../utils/createXYChartLayoutWithTheme";import createEncoderSelector from"../encodeable/createEncoderSelector";import createRenderLegend from"../components/legend/createRenderLegend";var defaultProps={className:"",margin:DEFAULT_MARGIN,theme:chartTheme,TooltipRenderer:DefaultTooltipRenderer},BoxPlot=/*#__PURE__*/function(a){function b(b){var c;return c=a.call(this,b)||this,_defineProperty(_assertThisInitialized(c),"createEncoder",createEncoderSelector(Encoder)),_defineProperty(_assertThisInitialized(c),"createMargin",createMarginSelector()),c.renderChart=c.renderChart.bind(_assertThisInitialized(c)),c}_inheritsLoose(b,a);var c=b.prototype;return c.renderChart=function renderChart(a){var b=a.width,c=a.height,d=this.props,e=d.data,f=d.margin,g=d.theme,h=d.TooltipRenderer,i=this.createEncoder(this.props),j=i.channels,k="nominal"===j.y.definition.type;if("undefined"!=typeof j.x.scale){var m=j.x.getDomain(e);j.x.scale.setDomain(m)}if("undefined"!=typeof j.y.scale){var n=j.y.getDomain(e);j.y.scale.setDomain(n)}var l=createXYChartLayoutWithTheme({width:b,height:c,margin:this.createMargin(f),theme:g,xEncoder:j.x,yEncoder:j.y});return l.renderChartWithFrame(function(a){return React.createElement(XYChart,{width:a.width,height:a.height,ariaLabel:"BoxPlot",margin:l.margin,renderTooltip:function renderTooltip(a){var b=a.datum,c=a.color;return React.createElement(h,{datum:b,color:c,encoder:i})},showYGrid:!0,theme:g,xScale:convertScaleToDataUIScale(j.x.scale.config),yScale:convertScaleToDataUIScale(j.y.scale.config)},l.renderXAxis(),l.renderYAxis(),React.createElement(BoxPlotSeries,{key:j.x.definition.field,animated:!0,data:k?e.map(function(a){return _extends({},a,{y:j.y.get(a)})}):e.map(function(a){return _extends({},a,{x:j.x.get(a)})}),fill:function fill(a){return j.color.encode(a,"#55acee")},fillOpacity:.4,stroke:function stroke(a){return j.color.encode(a)},strokeWidth:1,widthRatio:.6,horizontal:"nominal"===j.y.definition.type}))})},c.render=function render(){var a=this.props,b=a.className,c=a.data,d=a.width,e=a.height,f=this.createEncoder(this.props);return React.createElement(WithLegend,{className:"superset-chart-box-plot "+b,width:d,height:e,position:"top",renderLegend:createRenderLegend(f,c,this.props),renderChart:this.renderChart})},b}(React.PureComponent);_defineProperty(BoxPlot,"propTypes",{className:_pt.string,width:_pt.oneOfType([_pt.string,_pt.number]).isRequired,height:_pt.oneOfType([_pt.string,_pt.number]).isRequired,margin:_pt.any,data:_pt.any.isRequired,theme:_pt.any,TooltipRenderer:_pt.func}),_defineProperty(BoxPlot,"defaultProps",defaultProps);export{BoxPlot as default};