function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}/* eslint-disable sort-keys, no-magic-numbers */import React from"react";import{XAxis,YAxis}from"@data-ui/xy-chart";import{mergeMargin}from"@superset-ui/dimension";import{ChartFrame}from"@superset-ui/chart-composition";import createTickComponent from"./createTickComponent";import{DEFAULT_LABEL_ANGLE}from"./constants";// Additional margin to avoid content hidden behind scroll bar
var OVERFLOW_MARGIN=8,XYChartLayout=/*#__PURE__*/function(){// eslint-disable-next-line complexity
function a(a){_defineProperty(this,"chartWidth",void 0),_defineProperty(this,"chartHeight",void 0),_defineProperty(this,"containerWidth",void 0),_defineProperty(this,"containerHeight",void 0),_defineProperty(this,"margin",void 0),_defineProperty(this,"xEncoder",void 0),_defineProperty(this,"xLayout",void 0),_defineProperty(this,"yEncoder",void 0),_defineProperty(this,"yLayout",void 0);var b=a.width,c=a.height,d=a.minContentWidth,e=void 0===d?0:d,f=a.minContentHeight,g=void 0===f?0:f,h=a.margin,i=a.xEncoder,j=a.xTickSize,k=a.xTickTextStyle,l=a.autoAdjustXMargin,m=a.yEncoder,n=a.yTickSize,o=a.yTickTextStyle,p=a.autoAdjustYMargin;this.xEncoder=i,this.yEncoder=m,"undefined"!=typeof m.axis&&(this.yLayout=m.axis.computeLayout({axisWidth:Math.max(c-h.top-h.bottom),tickSize:m.axis.config.tickSize||n,tickTextStyle:o}));var q=this.yLayout&&(void 0===p||p)?mergeMargin(h,this.yLayout.minMargin):h,r=Math.max(b-q.left-q.right,e);"undefined"!=typeof i.axis&&(this.xLayout=i.axis.computeLayout({axisWidth:r,labelAngle:this.recommendXLabelAngle(i.axis.config.orient),tickSize:i.axis.config.tickSize||j,tickTextStyle:k}));var s=this.xLayout&&(void 0===l||l)?mergeMargin(q,this.xLayout.minMargin):q,t=Math.max(c-s.top-s.bottom,g),u=Math.round(r+s.left+s.right),v=Math.round(t+s.top+s.bottom),w=u>b,x=v>c;w&&(s.bottom+=OVERFLOW_MARGIN),x&&(s.right+=OVERFLOW_MARGIN),this.chartWidth=w?u+OVERFLOW_MARGIN:u,this.chartHeight=x?v+OVERFLOW_MARGIN:v,this.containerWidth=b,this.containerHeight=c,this.margin=s}var b=a.prototype;return b.recommendXLabelAngle=function recommendXLabelAngle(a){void 0===a&&(a="bottom");var b=this.yEncoder.axis;return this.yLayout&&("undefined"==typeof b||("right"!==b.config.orient||"bottom"!==a)&&("left"!==b.config.orient||"top"!==a))?-DEFAULT_LABEL_ANGLE:DEFAULT_LABEL_ANGLE},b.renderChartWithFrame=function renderChartWithFrame(a){return React.createElement(ChartFrame,{width:this.containerWidth,height:this.containerHeight,contentWidth:this.chartWidth,contentHeight:this.chartHeight,renderContent:a})},b.renderXAxis=function renderXAxis(a){var b=this.xEncoder.axis;return b&&this.xLayout?React.createElement(XAxis,_extends({label:b.getTitle(),labelOffset:this.xLayout.labelOffset,numTicks:b.config.tickCount,orientation:b.config.orient,tickComponent:createTickComponent(this.xLayout),tickFormat:b.getFormat()},a)):null},b.renderYAxis=function renderYAxis(a){var b=this.yEncoder.axis;return b&&this.yLayout?React.createElement(YAxis,_extends({label:b.getTitle(),labelOffset:this.yLayout.labelOffset,numTicks:b.config.tickCount,orientation:b.config.orient,tickFormat:b.getFormat()},a)):null},a}();export{XYChartLayout as default};