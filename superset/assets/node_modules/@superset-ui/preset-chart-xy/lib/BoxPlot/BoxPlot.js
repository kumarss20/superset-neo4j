"use strict";exports.__esModule=!0,exports.default=void 0;var _propTypes=_interopRequireDefault(require("prop-types")),_react=_interopRequireDefault(require("react")),_xyChart=require("@data-ui/xy-chart"),_theme=require("@data-ui/theme"),_chartComposition=require("@superset-ui/chart-composition"),_DefaultTooltipRenderer=_interopRequireDefault(require("./DefaultTooltipRenderer")),_Encoder=_interopRequireDefault(require("./Encoder")),_createMarginSelector=_interopRequireWildcard(require("../utils/selectors/createMarginSelector")),_convertScaleToDataUIScaleShape=_interopRequireDefault(require("../utils/convertScaleToDataUIScaleShape")),_createXYChartLayoutWithTheme=_interopRequireDefault(require("../utils/createXYChartLayoutWithTheme")),_createEncoderSelector=_interopRequireDefault(require("../encodeable/createEncoderSelector")),_createRenderLegend=_interopRequireDefault(require("../components/legend/createRenderLegend"));function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}return b.default=a,b}function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inheritsLoose(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var defaultProps={className:"",margin:_createMarginSelector.DEFAULT_MARGIN,theme:_theme.chartTheme,TooltipRenderer:_DefaultTooltipRenderer.default},BoxPlot=/*#__PURE__*/function(a){function b(b){var c;return c=a.call(this,b)||this,_defineProperty(_assertThisInitialized(c),"createEncoder",(0,_createEncoderSelector.default)(_Encoder.default)),_defineProperty(_assertThisInitialized(c),"createMargin",(0,_createMarginSelector.default)()),c.renderChart=c.renderChart.bind(_assertThisInitialized(c)),c}_inheritsLoose(b,a);var c=b.prototype;return c.renderChart=function renderChart(a){var b=a.width,c=a.height,d=this.props,e=d.data,f=d.margin,g=d.theme,h=d.TooltipRenderer,i=this.createEncoder(this.props),j=i.channels,k="nominal"===j.y.definition.type;if("undefined"!=typeof j.x.scale){var m=j.x.getDomain(e);j.x.scale.setDomain(m)}if("undefined"!=typeof j.y.scale){var n=j.y.getDomain(e);j.y.scale.setDomain(n)}var l=(0,_createXYChartLayoutWithTheme.default)({width:b,height:c,margin:this.createMargin(f),theme:g,xEncoder:j.x,yEncoder:j.y});return l.renderChartWithFrame(function(a){return _react.default.createElement(_xyChart.XYChart,{width:a.width,height:a.height,ariaLabel:"BoxPlot",margin:l.margin,renderTooltip:function renderTooltip(a){var b=a.datum,c=a.color;return _react.default.createElement(h,{datum:b,color:c,encoder:i})},showYGrid:!0,theme:g,xScale:(0,_convertScaleToDataUIScaleShape.default)(j.x.scale.config),yScale:(0,_convertScaleToDataUIScaleShape.default)(j.y.scale.config)},l.renderXAxis(),l.renderYAxis(),_react.default.createElement(_xyChart.BoxPlotSeries,{key:j.x.definition.field,animated:!0,data:k?e.map(function(a){return _extends({},a,{y:j.y.get(a)})}):e.map(function(a){return _extends({},a,{x:j.x.get(a)})}),fill:function fill(a){return j.color.encode(a,"#55acee")},fillOpacity:.4,stroke:function stroke(a){return j.color.encode(a)},strokeWidth:1,widthRatio:.6,horizontal:"nominal"===j.y.definition.type}))})},c.render=function render(){var a=this.props,b=a.className,c=a.data,d=a.width,e=a.height,f=this.createEncoder(this.props);return _react.default.createElement(_chartComposition.WithLegend,{className:"superset-chart-box-plot "+b,width:d,height:e,position:"top",renderLegend:(0,_createRenderLegend.default)(f,c,this.props),renderChart:this.renderChart})},b}(_react.default.PureComponent);exports.default=BoxPlot,_defineProperty(BoxPlot,"propTypes",{className:_propTypes.default.string,width:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]).isRequired,height:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]).isRequired,margin:_propTypes.default.any,data:_propTypes.default.any.isRequired,theme:_propTypes.default.any,TooltipRenderer:_propTypes.default.func}),_defineProperty(BoxPlot,"defaultProps",defaultProps);