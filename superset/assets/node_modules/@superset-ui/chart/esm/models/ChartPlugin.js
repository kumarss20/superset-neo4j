function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inheritsLoose(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}import React from"react";import{isRequired,Plugin}from"@superset-ui/core";import getChartMetadataRegistry from"../registries/ChartMetadataRegistrySingleton";import getChartBuildQueryRegistry from"../registries/ChartBuildQueryRegistrySingleton";import getChartComponentRegistry from"../registries/ChartComponentRegistrySingleton";import getChartControlPanelRegistry from"../registries/ChartControlPanelRegistrySingleton";import getChartTransformPropsRegistry from"../registries/ChartTransformPropsRegistrySingleton";function IDENTITY(a){return a}var EMPTY={};/**
 * Loaders of the form `() => import('foo')` may return esmodules
 * which require the value to be extracted as `module.default`
 * */function sanitizeLoader(a){return function(){var b=a();return b instanceof Promise?b.then(function(a){return"default"in a&&a.default||a}):b}}var ChartPlugin=/*#__PURE__*/function(a){function b(b){var c;c=a.call(this)||this,_defineProperty(_assertThisInitialized(c),"controlPanel",void 0),_defineProperty(_assertThisInitialized(c),"metadata",void 0),_defineProperty(_assertThisInitialized(c),"loadBuildQuery",void 0),_defineProperty(_assertThisInitialized(c),"loadTransformProps",void 0),_defineProperty(_assertThisInitialized(c),"loadChart",void 0);var d=b.metadata,e=b.buildQuery,f=b.loadBuildQuery,g=b.transformProps,h=void 0===g?IDENTITY:g,i=b.loadTransformProps,j=b.Chart,k=b.loadChart,l=b.controlPanel,m=void 0===l?EMPTY:l;if(c.controlPanel=m,c.metadata=d,c.loadBuildQuery=f&&sanitizeLoader(f)||e&&sanitizeLoader(function(){return e})||void 0,c.loadTransformProps=sanitizeLoader(i||function(){return h}),k)c.loadChart=sanitizeLoader(k);else if(j)c.loadChart=function(){return j};else throw new Error("Chart or loadChart is required");return c}_inheritsLoose(b,a);var c=b.prototype;return c.register=function register(){var a=this.config.key,b=void 0===a?isRequired("config.key"):a;return getChartMetadataRegistry().registerValue(b,this.metadata),getChartComponentRegistry().registerLoader(b,this.loadChart),getChartControlPanelRegistry().registerValue(b,this.controlPanel),getChartTransformPropsRegistry().registerLoader(b,this.loadTransformProps),this.loadBuildQuery&&getChartBuildQueryRegistry().registerLoader(b,this.loadBuildQuery),this},c.unregister=function unregister(){var a=this.config.key,b=void 0===a?isRequired("config.key"):a;return getChartMetadataRegistry().remove(b),getChartComponentRegistry().remove(b),getChartControlPanelRegistry().remove(b),getChartTransformPropsRegistry().remove(b),getChartBuildQueryRegistry().remove(b),this},c.configure=function configure(b,c){return a.prototype.configure.call(this,b,c),this},b}(Plugin);export{ChartPlugin as default};